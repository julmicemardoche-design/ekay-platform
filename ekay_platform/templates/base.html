<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>{% block title %}E-KAY - Location au village EKAM{% endblock %}</title>
    <meta name="description" content="Trouvez votre logement idéal au village EKAM. Location de maisons et appartements meublés avec toutes les commodités.">
    <meta name="keywords" content="location, EKAY, EKAM, logement, location meublée, Haïti, immobilier">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ekay-theme.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/footer.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/property-cards.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/notifications.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}">
    {% block extra_css %}{% endblock %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- PWA Manifest -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <meta name="theme-color" content="#0d6efd">
    
    <!-- Icons and PWA meta tags -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='icons/favicon-32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='icons/favicon-16.png') }}">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin="anonymous"
          referrerpolicy="no-referrer" />
    
    <!-- PWA Configuration -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="E-KAY">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icons/apple-touch-icon.png') }}">
    <meta name="msapplication-TileImage" content="{{ url_for('static', filename='icons/mstile-150x150.png') }}">
    <meta name="msapplication-TileColor" content="#0d6efd">
    <meta name="msapplication-config" content="{{ url_for('static', filename='browserconfig.xml') }}">
</head>
<body class="d-flex flex-column min-vh-100">
    <!-- Barre de navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="{{ url_for('main.index') }}">
                <img src="{{ url_for('static', filename='img/logo.svg') }}" alt="E-KAY Logo" height="40" class="me-2">
                <div class="d-flex align-items-center">
                    <span class="d-none d-sm-inline me-2">E-KAY</span>
                    <img src="{{ url_for('static', filename='images/ekam-logo-image.svg') }}" alt="EKAM" height="30" class="d-none d-sm-inline ms-2" style="border-radius: 4px;">
                </div>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('main.index') }}">
                            <i class="fas fa-home me-1"></i> Accueil
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('properties.list_properties') }}">
                            <i class="fas fa-building me-1"></i> Propriétés
                        </a>
                    </li>
                    {% if current_user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('properties.new_property') }}">
                            <i class="fas fa-plus-circle me-1"></i> Déposer une annonce
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('main.dashboard') }}">
                            <i class="fas fa-tachometer-alt me-1"></i> Tableau de bord
                        </a>
                    </li>
                    {% endif %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('main.about') }}">
                            <i class="fas fa-info-circle me-1"></i> À propos
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('main.contact') }}">
                            <i class="fas fa-envelope me-1"></i> Contact
                        </a>
                    </li>
                </ul>
                
                <ul class="navbar-nav ms-auto">
                    {% if current_user.is_authenticated %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            {% if current_user.avatar %}
                                <img src="{{ current_user.avatar_url() }}" class="rounded-circle me-2" width="30" height="30" alt="Profil">
                            {% else %}
                                <i class="fas fa-user-circle me-1"></i>
                            {% endif %}
                            {{ current_user.username }}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <li><a class="dropdown-item" href="{{ url_for('auth.profile') }}"><i class="fas fa-user me-2"></i>Mon profil</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('properties.my_properties') }}"><i class="fas fa-home me-2"></i>Mes biens</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('properties.my_bookings') }}"><i class="fas fa-calendar-check me-2"></i>Mes réservations</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('properties.host_bookings') }}"><i class="fas fa-home me-2"></i>Réservations reçues</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('user.favorites') }}"><i class="fas fa-heart me-2"></i>Favoris</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('auth.settings') }}"><i class="fas fa-cog me-2"></i>Paramètres</a></li>
                            
                            {% if current_user.is_admin %}
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="{{ url_for('admin.admin_dashboard') }}">
                                <i class="fas fa-tachometer-alt me-2"></i>Tableau de bord Admin</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('admin.new_property') }}">
                                <i class="fas fa-plus-circle me-2"></i>Ajouter un bien</a></li>
                            <li><a class="dropdown-item" href="#">
                                <i class="fas fa-users-cog me-2"></i>Gestion des utilisateurs</a></li>
                            {% endif %}
                            
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="{{ url_for('auth.logout') }}">
                                <i class="fas fa-sign-out-alt me-2"></i>Déconnexion</a></li>
                        </ul>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a href="{{ url_for('auth.login') }}" class="btn btn-outline-light me-2">
                            <i class="fas fa-sign-in-alt me-1"></i>Connexion
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for('auth.register') }}" class="btn btn-primary">
                            <i class="fas fa-user-plus me-1"></i>S'inscrire
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Contenu principal -->
    <main class="flex-grow-1">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show mb-0" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <!-- Indicateur de chargement global -->
    <div id="loading-overlay" class="position-fixed w-100 h-100 bg-white d-flex justify-content-center align-items-center" style="z-index: 9999; display: none !important;">
        <div class="text-center">
            <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                <span class="visually-hidden">Chargement...</span>
            </div>
            <p class="mt-3">Chargement en cours...</p>
        </div>
    </div>

    <!-- Conteneur pour les notifications toast -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 1090;"></div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4 mt-auto">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>E-KAY</h5>
                    <p>Plateforme de location au village EKAM</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item">
                            <a href="#" class="text-white" data-bs-toggle="modal" data-bs-target="#aboutModal">
                                <i class="fas fa-info-circle me-1"></i>À propos
                            </a>
                        </li>
                        <li class="list-inline-item ms-3">
                            <a href="#" class="text-white" data-bs-toggle="modal" data-bs-target="#licenseModal">
                                <i class="fas fa-file-alt me-1"></i>Licence
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="text-center mt-3 pt-3 border-top border-secondary">
                <p class="mb-0">&copy; {{ now().year }} E-KAY. Tous droits réservés.</p>
            </div>
        </div>
    </footer>
    
    <!-- Village Map Modal -->
    <div class="modal fade" id="villageMapModal" tabindex="-1" aria-labelledby="villageMapModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="villageMapModalLabel">
                        <i class="fas fa-map-marked-alt me-2"></i>
                        Localisation du Village EKAM
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <div class="modal-body p-0">
                    <div id="villageMap" style="height: 500px; width: 100%;"></div>
                </div>
                <div class="modal-footer">
                    <p class="text-muted small mb-0 me-auto">
                        <i class="fas fa-info-circle me-1"></i>
                        Coordonnées : 19.6917° N, -71.8250° O
                    </p>
                    <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">
                        <i class="fas fa-times me-1"></i>Fermer
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal À propos -->
    <div class="modal fade" id="aboutModal" tabindex="-1" aria-labelledby="aboutModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="aboutModalLabel">
                        <i class="fas fa-info-circle me-2"></i>À propos de E-KAY
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <div class="modal-body">
                    <h6>Bienvenue sur E-KAY</h6>
                    <p>E-KAY est une plateforme de location de biens immobiliers au sein du village EKAM, conçue pour faciliter la mise en relation entre propriétaires et locataires.</p>
                    
                    <h6 class="mt-4">Notre mission</h6>
                    <p>Simplifier la recherche de logement et la gestion locative au sein de notre communauté résidentielle.</p>
                    
                    <h6 class="mt-4">Contact</h6>
                    <p><i class="fas fa-envelope me-2"></i>contact@ekay-ekam.ht</p>
                    <p><i class="fas fa-phone me-2"></i>+509 36 00 0000</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Licence -->
    <div class="modal fade" id="licenseModal" tabindex="-1" aria-labelledby="licenseModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="licenseModalLabel">
                        <i class="fas fa-file-alt me-2"></i>Licence d'utilisation - E-KAY
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <div class="modal-body">
                    <h6>1. Propriété intellectuelle</h6>
                    <p>Tous les contenus présents sur ce site sont la propriété exclusive de E-KAY ou de ses concédants de licence.</p>
                    
                    <h6 class="mt-4">2. Droits d'auteur</h6>
                    <p class="fw-bold">© 2025 Walny Mardoché JULMICE. Tous droits réservés.</p>
                    
                    <p>Ce logiciel et tous ses éléments (code source, design, interface, données, documentation, etc.) sont la propriété exclusive de Walny Mardoché JULMICE.</p>
                    
                    <h6 class="mt-4">3. Restrictions d'utilisation</h6>
                    <p>Toute reproduction, modification, diffusion ou utilisation, partielle ou totale, sans autorisation écrite préalable de l'auteur, est strictement interdite et constitue une violation du Code de la propriété intellectuelle et des lois internationales sur le droit d'auteur.</p>
                    
                    <p>L'utilisation de ce logiciel est réservée aux personnes ou entités ayant obtenu une autorisation explicite de l'auteur.</p>
                    
                    <h6 class="mt-4">4. Contact</h6>
                    <p class="mb-0"><strong>Contact officiel :</strong> julmicemardoche@gmail.com</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bouton de retour en haut -->
    <button onclick="topFunction()" id="backToTop" class="btn btn-primary rounded-circle" title="Retour en haut">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Conteneur pour les messages toast -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 1100">
        <!-- Les messages toast seront insérés ici dynamiquement -->
    </div>

    <!-- Scripts JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% if request.endpoint == 'main.index' %}
    <script src="{{ url_for('static', filename='js/home.js') }}"></script>
    {% endif %}
    
    <script>
        // Fonction pour afficher un message à l'utilisateur
        function showAlert(message, type = 'info') {
            const toastContainer = document.querySelector('.toast-container');
            const toast = document.createElement('div');
            toast.className = `toast show`;
            toast.role = 'alert';
            toast.setAttribute('aria-live', 'assertive');
            toast.setAttribute('aria-atomic', 'true');
            toast.innerHTML = `
                <div class="toast-header bg-${type} text-white">
                    <strong class="me-auto">Notification</strong>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body">
                    ${message}
                </div>
            `;
            toastContainer.appendChild(toast);
            
            // Supprimer le toast après 5 secondes
            setTimeout(() => {
                toast.remove();
            }, 5000);
        }
        
        // Gestion du bouton de retour en haut
        document.addEventListener('DOMContentLoaded', function() {
            const mybutton = document.getElementById("backToTop");
            if (mybutton) {
                // Afficher ou masquer le bouton lors du défilement
                window.onscroll = function() {
                    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                        mybutton.style.display = "block";
                    } else {
                        mybutton.style.display = "none";
                    }
                };
                
                // Gestion du clic sur le bouton
                mybutton.addEventListener('click', function() {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }
            
            // Initialisation des tooltips Bootstrap
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
            
            // Initialisation des popovers Bootstrap
            var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
            var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
                return new bootstrap.Popover(popoverTriggerEl);
            });
        });
    </script>
    
    // Fonction pour afficher un message à l'utilisateur
    function showAlert(message, type = 'info') {
        const toastContainer = document.querySelector('.toast-container');
        const toast = document.createElement('div');
        toast.className = `toast show`;
        toast.role = 'alert';
        toast.setAttribute('aria-live', 'assertive');
        toast.setAttribute('aria-atomic', 'true');
        
        // Déterminer l'icône en fonction du type de message
        let icon, title;
        switch(type) {
            case 'success':
                icon = 'check-circle';
                title = 'Succès';
                break;
            case 'danger':
                icon = 'exclamation-circle';
                title = 'Erreur';
                break;
            case 'warning':
                icon = 'exclamation-triangle';
                title = 'Avertissement';
                break;
            default:
                icon = 'info-circle';
                title = 'Information';
        }
        
        toast.innerHTML = `
            <div class="toast-header bg-${type} text-white">
                <strong class="me-auto">
                    <i class="fas fa-${icon} me-2"></i>${title}
                </strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Fermer"></button>
            </div>
            <div class="toast-body">
                ${message}
            </div>
        `;
        
        toastContainer.appendChild(toast);
        
        // Supprimer le message après 5 secondes
        setTimeout(() => {
            toast.remove();
        }, 5000);
    }
    
    // Fonction pour afficher/masquer l'écran de chargement
    function setLoading(show) {
        const overlay = document.getElementById('loading-overlay');
        if (show) {
            overlay.style.display = 'flex';
        } else {
            overlay.style.display = 'none';
        }
    }
    
    // Intercepter les soumissions de formulaire pour afficher le chargement
    document.addEventListener('submit', function(e) {
        const form = e.target;
        if (form.method.toLowerCase() === 'post') {
            setLoading(true);
        }
    });
    
    // Intercepter les clics sur les liens pour afficher le chargement
    document.addEventListener('click', function(e) {
        const link = e.target.closest('a');
        if (link && link.href && !link.href.includes('#')) {
            setLoading(true);
        }
    });
    
    // Cacher le chargement une fois la page chargée
    window.addEventListener('load', function() {
        setLoading(false);
        
        // Vérifier la connexion au chargement de la page
        if (!navigator.onLine) {
            showAlert('Vous êtes actuellement hors ligne. Certaines fonctionnalités peuvent être limitées.', 'warning');
        }
    });
    
    // Gestion des changements de connexion
    window.addEventListener('online', function() {
        showAlert('Vous êtes de nouveau en ligne !', 'success');
    });
    
    window.addEventListener('offline', function() {
        showAlert('Vous êtes maintenant hors ligne. Certaines fonctionnalités peuvent être limitées.', 'warning');
    });
    
    // Service Worker désactivé temporairement pour le débogage
    console.log('Service Worker désactivé pour le débogage');
    
    // Vérification de la connexion réseau
    function updateOnlineStatus() {
        console.log('État de la connexion:', navigator.onLine ? 'en ligne' : 'hors ligne');
    }
    
    // Vérifier l'état de la connexion au chargement de la page
    window.addEventListener('load', function() {
        updateOnlineStatus();
        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);
        
        // Désactiver complètement le service worker pour le débogage
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for (let registration of registrations) {
        if (!navigator.onLine) {
            // Afficher un message d'erreur en cas de déconnexion
            const offlineAlert = document.createElement('div');
            offlineAlert.className = 'alert alert-warning alert-dismissible fade show fixed-top m-3';
            offlineAlert.role = 'alert';
            offlineAlert.innerHTML = `
                <i class="fas fa-wifi-slash me-2"></i>
                <strong>Hors ligne</strong> - Certaines fonctionnalités sont limitées.
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fermer"></button>
            `;
            document.body.prepend(offlineAlert);
        }
    }
  
  // Vérifier l'état de la connexion au chargement de la page
  window.addEventListener('load', function() {
    updateOnlineStatus();
    window.addEventListener('online', updateOnlineStatus);
  });
  
  // Fonction pour afficher un message à l'utilisateur
  function showAlert(message, type = 'info') {
    const toastContainer = document.querySelector('.toast-container');
    const toast = document.createElement('div');
    toast.className = `toast show`;
    toast.role = 'alert';
    toast.setAttribute('aria-live', 'assertive');
    toast.setAttribute('aria-atomic', 'true');
      });
    </script>

    <script>
    // Initialisation de la carte du village
    document.addEventListener('DOMContentLoaded', function() {
        const villageMapModal = document.getElementById('villageMapModal');
        if (villageMapModal) {
            let map = null;
            let marker = null;

            villageMapModal.addEventListener('shown.bs.modal', function () {
                if (!map) {
                    // Coordonnées du village EKAM (Caracol, Haïti)
                    const villageCoords = [19.6917, -71.8250];
                    
                    // Créer la carte
                    map = L.map('villageMap').setView(villageCoords, 15);
                    
                    // Ajouter la couche de tuiles OpenStreetMap
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                        maxZoom: 19
                    }).addTo(map);
                    
                    // Ajouter un marqueur pour le village
                    marker = L.marker(villageCoords, {
                        title: 'Village EKAM',
                        alt: 'Localisation du village EKAM',
                        riseOnHover: true
                    }).addTo(map);
                    
                    // Ajouter une popup avec des informations
                    marker.bindPopup(`
                        <div class="text-center">
                            <h6 class="mb-2">Village EKAM</h6>
                            <p class="mb-1"><i class="fas fa-map-marker-alt me-1"></i> Caracol, Haïti</p>
                            <p class="mb-1"><i class="fas fa-users me-1"></i> Environ 1,500 habitants</p>
                            <p class="mb-0"><i class="fas fa-home me-1"></i> Communauté résidentielle</p>
                        </div>
                    `).openPopup();
                    
                    // Ajuster la vue pour s'assurer que le marqueur est bien visible
                    map.fitBounds([villageCoords], { padding: [50, 50] });
                }
            });
            
            // Nettoyer la carte lorsque la modale est fermée
            villageMapModal.addEventListener('hidden.bs.modal', function () {
                if (map) {
                    map.invalidateSize();
                }
            });
        }
    });
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
